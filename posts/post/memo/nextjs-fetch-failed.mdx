---
layout: post
title: Next.js 13 배포시 TypeError fetch failed
date: 2023-11-06
category: Memo
description: Error occurred prerendering page, TypeError fetch failed
tags: [Memo, Bug, Next.js]
keywords: Memo, Bug, Next.js, TypeError, Nextjs13, Error, prerender, fetch
---

### Problem

While working on an App router project with Next.js 13, I encountered the following error during deployment:

```shell
Error occurred prerendering page "/contest". Read more: https://nextjs.org/docs/messages/prerender-error
TypeError: fetch failed
    at Object.fetch (node:internal/deps/undici/undici:11372:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)

Error occurred prerendering page "/". Read more: https://nextjs.org/docs/messages/prerender-error
TypeError: fetch failed
    at Object.fetch (node:internal/deps/undici/undici:11372:11)
   Generating static pages (20/21) [  ==]
 ✓ Generating static pages (21/21)

> Export encountered errors on following paths:
        /community/page: /community
        /contest/page: /contest
        /page: /

```

### Solution

Various solutions were explored, including upgrading or downgrading Node.js versions, updating Next.js, checking the App router folder structure, or considering it as a problem to be resolved in the future with no immediate solution.

Eventually, the issue was resolved by configuring the pages as dynamic.

```js
// src/app/page.tsx
export const dynamic = "force-dynamic";

const Home = async () => {
  const res = await getData();
  ...
};
```


It seems that there is an issue when trying to build the page as a static page because the page needs to fetch different data each time it renders, and the API is implemented within Next.js.

Client components did not encounter this error, and dynamically routed pages were built as dynamic pages by default. However, basic server components that were not explicitly set to dynamic encountered errors.

![2](/img/2023-11-06-Nextjs-Fetch-failed/error2.PNG)
